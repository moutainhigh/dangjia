<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dangjia.acg.mapper.order.IBillMendOrderCheckMapper">

    <!--查询退款历史记录-->
     <select id="queryReturnWorkerList" resultType="com.dangjia.acg.dto.refund.ReturnWorkOrderDTO">
         SELECT
            t1.id repairWorkOrderId,
            CONCAT('申请退',t2.name) repairWorkOrderName,
            t1.create_date applyDate,
            t1.house_id houseId,
            CONCAT(t1.content_a,t1.content_b) content
        FROM
            dj_repair_change_order t1,dj_core_worker_type t2
        where t1.type=#{type}
        and t1.worker_type_id=t2.id
        and t1.house_id=#{houseId}
        and t1.data_status = '0'
        order by t1.create_date desc
     </select>

    <select id="queryReturnWorkerInfo" resultType="com.dangjia.acg.dto.refund.ReturnWorkOrderDTO">
         SELECT
            t1.id repairWorkOrderId,
           CONCAT('申请退',t2.name) repairWorkOrderName,
           t1.create_date applyDate,
           t1.house_id houseId,
           CONCAT(t1.content_a,t1.content_b) content,
           t1.worker_type_id workTypeId,
           t2.`name` workTypeName
        FROM
            dj_repair_change_order t1,dj_core_worker_type t2
        where t1.type=2
        and t1.worker_type_id=t2.id
        and t1.id=#{repairWorkOrderId}
        and t1.data_status = '0'
     </select>

</mapper>