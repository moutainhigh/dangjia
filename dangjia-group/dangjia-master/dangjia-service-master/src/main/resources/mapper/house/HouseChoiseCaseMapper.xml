<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dangjia.acg.mapper.house.IHouseChoiceCaseMapper">
    <sql id="all">
               title,
               house_id        houseId,
               city_id         cityId,
               label,
               image,
               address,
               source,
               money,
               show_time_start showTimeStart,
               show_time_end   showTimeEnd,
               to_show         toShow
    </sql>

    <select id="getTimeOutAd" resultType="java.lang.String">
        SELECT id
        FROM dj_core_house_choice_case
        WHERE now() > show_time_end
          AND to_show = 3
    </select>
    <select id="getTimingAd" resultType="java.lang.String">
        SELECT id
        FROM dj_core_house_choice_case
        WHERE now() BETWEEN show_time_start
                      AND show_time_end
          AND to_show = 2
    </select>
    <select id="getHouseChoiceCase" resultType="com.dangjia.acg.modle.house.HouseChoiceCase">
        SELECT
        <include refid="all"/>
        FROM
        dj_core_house_choice_case
        WHERE
        data_status = 0
        AND ( to_show = 1 OR to_show = 3 )
        <if test="cityId != null">
            AND city_id = '402881882ba8753a012ba93101120116'
        </if>
        ORDER BY RAND()
    </select>
    <select id="getAllHouseChoiceCase" resultType="com.dangjia.acg.modle.house.HouseChoiceCase">
        SELECT
        <include refid="all"/>
        FROM
        dj_core_house_choice_case
        WHERE
        data_status = 0
    </select>


</mapper>

