<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dangjia.acg.mapper.account.IStoreAccountFlowRecordMapper">

    <select id="accountFlowRecordDTOs" resultType="com.dangjia.acg.dto.supplier.AccountFlowRecordDTO">
          SELECT
            afr.state,
            afr.house_order_id AS houseOrderId,
            wwd.create_date AS createDate,
            afr.money,
            wwd.memo,
            wwd.state AS depositeState,
            wwd.image
        FROM
            dj_account_flow_record afr
        INNER JOIN dj_worker_withdraw_deposit wwd ON afr.house_order_id = wwd.id
        WHERE
            afr.state = 1
        AND afr.data_status = 0
        AND afr.flow_type = 2
        AND afr.defined_account_id = #{supId}
        AND wwd.state=#{depositeState}
        <if test="null!=beginDate and ''!=beginDate and null!=endDate and ''!=endDate ">
            AND wwd.create_date BETWEEN #{beginDate} AND #{endDate}
        </if>
    </select>

</mapper>